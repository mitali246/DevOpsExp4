pipeline {
    agent any

    stages {
        stage('Environment Setup') {
            steps {
        echo 'Setting up environment and installing dependencies...'
        sh 'python3 -m venv venv'
        sh 'source venv/bin/activate'
        sh 'pip install pytest selenium' // This line is the problem
        sh 'venv/bin/pip install pytest selenium' // This is the corrected line
        sh 'sh chmod +x chromedriver'
        sh 'export PATH=$PATH:$(pwd)'
    }
}

        stage('Run Selenium Tests') {
            steps {
                echo 'Executing tests...'
         
                sh 'source venv/bin/activate'
                sh 'pytest'
            }
        }
    }
}